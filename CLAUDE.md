# CLAUDE.md — ProcessDesign リポジトリガイド

## プロジェクト概要

このリポジトリは**製造業の工程設計（Process Design / Process Planning）ナレッジベース**です。製品の設計情報をもとに「どのような工程・設備・方法で製品を製造するか」を計画・設計するための知識を体系的にまとめています。APQP Phase 3（工程設計・開発）を中心に、その前後のフェーズで作成される成果物を網羅しています。

**対象読者：** 生産技術エンジニア、品質保証担当者、APQP / IATF 16949 に関わる方

**言語：** 日本語主体（英語専門用語を括弧内に併記）

**注意：** コードファイル・テストファイル・ビルド設定は存在しません。純粋なドキュメントリポジトリです。

---

## リポジトリ構造

```
ProcessDesign/
├── CLAUDE.md          # このファイル
├── README.md          # 記事一覧と概要
└── articles/          # 記事ファイル（15本）
    ├── 01-overview.md                           # 全体像：APQPフェーズ、成果物一覧、依存関係
    ├── 02-process-flow-chart.md                 # 工程フローチャート（JIS Z 8206記号）
    ├── 03-pfmea.md                              # PFMEA：AIAG-VDA 7ステップ、S/O/D評価、AP
    ├── 03a-pfmea-absolute-evaluation.md         # PFMEA 絶対評価法（客観説TQM、非自動車向け）
    ├── 04-control-plan.md                       # コントロールプラン：3段階、カラム構成
    ├── 05-characteristics-matrix.md             # 特性マトリクス：工程×製品特性マッピング
    ├── 06-qc-process-chart.md                   # QC工程表（日本独自の品質管理文書）
    ├── 07-process-instructions.md               # 作業指示書 / SOP
    ├── 08-equipment-spec.md                     # 設備仕様書（URS）：FAT/SAT受入検査
    ├── 09-jig-fixture.md                        # 治工具設計図：3-2-1位置決め、ポカヨケ
    ├── 09a-tool-requirement-spec.md             # 工具要求仕様書（生産技術課発行）
    ├── 09b-tool-requirement-spec-adjustment.md  # 工具要求仕様書（調整・補正工程編）
    ├── 10-floor-plan-layout.md                  # フロアプランレイアウト：設備配置、動線
    ├── 11-packaging-spec.md                     # 梱包仕様書：緩衝設計、輸送試験
    └── 12-process-design-doc.md                 # 工程設計書（総括文書）
```

### ファイル命名規則

| パターン | 意味 |
|----------|------|
| `NN-topic.md` | 正規の成果物記事（例：`04-control-plan.md`） |
| `NNa-topic.md`、`NNb-topic.md` | 親記事のサブトピック・補足（例：`03a-`、`09a-`、`09b-`） |

サブ記事（`*a`、`*b`）は親記事に従属します。README.md では親記事の直後に記載し、記事末尾に親記事へのナビゲーションリンクを設置します。

---

## 各記事の構成パターン

すべての記事は以下の順序でセクションを構成します：

1. **`## 1. 概要`** — 成果物の定義（`### XXXとは`）、目的（`### 目的`、2列テーブル形式）、工程設計での位置づけ（`### 工程設計における位置づけ`、ASCII依存関係図＋説明）
2. **コア方法論セクション**（`## 2.`、`## 3.`…） — 番号付きの記事固有コンテンツ。テーブルとコードブロック図を多用。
3. **`## N. 具体例`** — 共通事例製品 **インクジェットプリンタ PX-500** を使用（後述）
4. **`## N. よくある課題と対策`** — `### 課題N: …` の構成、課題詳細・対策の2列テーブル
5. **`## N. ベストプラクティス`** — 番号付きまたは箇条書きリスト
6. **`## 参考規格・文献`** — 規格・文献の箇条書き
7. **ナビゲーションフッター** — ファイル末尾の相対リンク：
   ```
   [← 工程設計の全体像に戻る](./01-overview.md)
   ```
   サブ記事の場合：
   ```
   [← PFMEA（工程FMEA）に戻る](./03-pfmea.md)　|　[工程設計の全体像に戻る](./01-overview.md)
   ```
   全角スペース（`　`）をナビゲーションリンク間の区切りとして使用します。

---

## 執筆規約

### 言語・用語

- **見出し：** 日本語のみ
- **本文：** 日本語主体。英語用語は初出時に括弧内に併記（例：`コントロールプラン（Control Plan / CP）`）
- **規格名・略語：** 翻訳せずそのまま表記（APQP、PFMEA、IATF 16949、JIS Z 8206、URS、MSA、PPAP、SPC、SOP、WI、BOM、FAT、SAT、CC、SC、AP、RI、RPN、Cp/Cpk）
- **用語の一貫性：** `01-overview.md` の用語対照表（セクション5）を正規の定義として使用する

### Markdown 記法

- `#` H1：記事タイトルのみ（1ファイルに1つ）。形式：`# 日本語タイトル（English Title）`
- `##` H2：番号付き大見出し（`## 1. 概要`、`## 2. …`）。番号プレフィックス必須
- `###` H3：セクション内の小見出し（番号プレフィックス不要）
- `####` H4：必要な場合のみ使用（多用しない）
- `**太字**`：キーワードの初出、警告、重要概念。多用しない
- 表：2属性以上の構造化情報に使用。ヘッダー行と区切り行（`|---|---|`）必須
- バッククォート3つ（` ``` `）：ASCII図・構造図に使用。言語タグなし
- `---`：トップレベルセクション間の区切り
- 内部リンク：`articles/` ディレクトリからの相対パス（例：`[コントロールプラン](./04-control-plan.md)`）

### 引用ブロック（Callout）の種類

`>` ブロック引用で注釈を記載する。種類は冒頭の太字ラベルで示す：

| ラベル | 用途 |
|--------|------|
| `> **名称について**:` | 規格間・文書間の名称の違いを説明 |
| `> **補足**:` | 非必須の補足情報、クロスリファレンス |
| `> **注意**:` | 読者が把握すべき重要な注意事項 |
| `> **重要**:` | 必ず守るべき制約・ルール |
| `> **推奨**:` | ベストプラクティス（必須ではない） |

### 特殊特性記号

全記事・全具体例で統一して使用する：

| 記号 | 意味 | 使用場面 |
|------|------|----------|
| `◆` / `CC` | 重要特性（安全・法規制関連） | PFMEA、コントロールプラン、工程フローチャート |
| `◇` / `SC` | 重要特性（製品機能に大きく影響） | 同上 |

### 工程番号

具体例中の工程番号は**10刻み**（10, 20, 30, …）で付番する。`02-process-flow-chart.md` で確立された規則。中間工程の追加（15, 25, …）が可能になるため、連番（1, 2, 3, …）は使用しない。

### 依存関係図

各記事の `### 工程設計における位置づけ` には、成果物の位置を示すASCII図が必須：

```
上流文書
    │
    ▼
┌─────────────┐
│ 本記事の成果物 │ ← 本記事
└─────────────┘
    │
    ├──→ 下流文書A
    └──→ 下流文書B
```

Mermaid や PlantUML などの図表記法は使用しない（ASCII図のみ）。

---

## ドキュメントの依存関係

記事群は有向依存グラフを形成しています。編集時は記事間の整合性を維持してください：

```
製品図面・仕様書
    │
    ▼
02  工程フローチャート ──────────────────────┐
    │                                      │
    ▼                                      ├──→ 08 設備仕様書
03  PFMEA ←── 05 特性マトリクス              │       │
    │                                      │       ▼
    ▼                                      │   09  治工具設計図
04  コントロールプラン ←→ 06 QC工程表        │
    │                                      ├──→ 10 フロアプランレイアウト
    ▼                                      │
07  作業指示書                               └──→ 11 梱包仕様書
    │
    └── 全成果物 ──→ 12 工程設計書（総括文書）
```

**トレーサビリティルール：** 工程番号（工程番号）は、工程フローチャート・PFMEA・コントロールプラン・QC工程表・作業指示書で同一の番号を使用すること。PX-500例では `10, 20, 30, 40, 50, 60, 70, 80, 90, 100` を使用。これを変更する場合は全記事を更新する。

---

## 主要規格・フレームワーク

| 規格 | 主な使用記事 | 用途・備考 |
|------|-------------|-----------|
| APQP 3rd Edition (2024) | 01, 04, 07, 11, 12 | 全体フレームワーク（5フェーズ）、Safe Launch概念 |
| AIAG-VDA FMEA Handbook (2019) | 03 | 7ステップ、S/O/D評価、AP（Action Priority）。**RPNは主要リスク指標として使用しない**（AP が標準） |
| IATF 16949:2016 | 全記事 | 自動車品質マネジメント要求。引用時は条項番号を明記（例：条項 8.5.1.1） |
| JIS Z 8206 | 02 | 工程フローチャートの記号規格 |
| ISO 9001 | 背景文脈 | 明示的に該当する場合のみ参照 |
| AIAG MSA 4th Edition (2010) | 09a | 測定システム解析（κ ≥ 0.75） |
| JIS B 9703:2011 | 09a | 治工具設計のリスクアセスメント |

**規格条項の引用形式：** `IATF 16949:2016 条項 8.5.1.1`（規格名、コロン、年、半角スペース、「条項」、半角スペース、条項番号）

---

## 共通具体例製品

全記事の具体例は以下の**架空製品**を使用します：

- **品名：** インクジェットプリンタ PX-500
- **品番：** PX-500A Rev.B
- **組立ライン：** プリンタ組立ライン #1
- **用途：** 家庭用消費者向けインクジェットプリンタの組立

単一製品を全記事で共通使用することで、上流成果物（例：PFMEA の工程60 キャリッジ組立）と下流成果物（例：コントロールプランの同工程行）の対応関係が読者に明確になります。

- 既存記事に例を追加する場合：PX-500 と既存の工程番号を再利用する
- 新規記事を作成する場合：同じ PX-500 組立シナリオから工程を展開する

---

## コントリビューションガイド

### 新規メイン記事の追加

1. `articles/NN-topic-name.md` を次の利用可能な2桁番号で作成
2. 「各記事の構成パターン」セクションの構造に従う
3. `README.md` の記事一覧テーブルに適切な順序で行を追加
4. 記事末尾に `01-overview.md` へのナビゲーションフッターを追加
5. 上流・下流記事に `> **補足**:` callout でクロスリファレンスを追加
6. 新たな依存関係が生じる場合は `01-overview.md` セクション3の依存関係図を更新

### 新規サブ記事の追加

1. `articles/NNx-topic-name.md` を作成（`NN` は親記事番号、`x` は次の利用可能な文字）
2. 冒頭に `> **前提**:` または `> **補足**:` で親記事との関係を説明
3. `README.md` の親記事行の直後に行を追加
4. 親記事に `> **補足**:` または `> **関連記事**:` でサブ記事へのリンクを追加
5. サブ記事末尾に双方向フッターを設置

### やってはいけないこと

- コード・スクリプト・設定ファイル・ビルドツールを追加しない（純粋なドキュメントリポジトリ）
- 新しい例示製品を導入しない（PX-500 を使い続ける）
- Mermaid、PlantUML などの図表記法を使用しない（ASCII図のみ）
- `参考規格・文献` セクションやナビゲーションフッターを削除しない
- FMEA コンテンツで RPN を主要リスク指標として使用しない（AP を使用する）
- 規格改訂時（例：APQP 第4版）は参照をサイレントに置換せず、`> **注意**:` で版の違いを明記する

---

## Git ワークフロー

### ブランチ命名

- AI補助作業：`claude/<short-description>-<hash>`
- 人手による作業：`add-msa-article`、`fix-pfmea-ap-table` などのケバブケース

### コミットメッセージ形式

```
<成果物の短い説明>: <変更内容の要約>

- 新規: articles/NN-topic.md — 主な内容の箇条書き
- 更新: articles/XX-other.md（変更理由）

https://claude.ai/code/session_<session-id>   ← AI補助コミットの場合のみ
```

過去のコミット例：
- `PFMEA 絶対評価法（客観説TQMに基づく4点評価）の記事を追加`
- `09a-tool-requirement-spec: 機能要求の網羅的な導出アプローチを Section 3.3 に追加`

ルール：件名は日本語・50〜80文字・末尾にピリオド不要。複数ファイル更新時は本文に列挙。

---

## 重要ファイル

| ファイル | 役割 |
|----------|------|
| `README.md` | 記事一覧の唯一の正規ソース。記事追加・改名時は必ず更新 |
| `articles/01-overview.md` | 全記事が参照する基盤記事。用語対照表（セクション5）・依存関係図（セクション3）・APQPフェーズ構造を含む |
| `articles/02-process-flow-chart.md` | 記事構造・callout規則・JIS記号表・ASCII図スタイルの参考パターン |
| `articles/12-process-design-doc.md` | 全記事をクロスリファレンスする総括文書。全記事と整合性を保つ必要あり |
| `articles/09a-tool-requirement-spec.md` | 最も最近進化した記事。現在の執筆規約（サブ記事クロスリファレンス、統計的詳細レベル、役割分担テーブル）の参考 |

---

## 用語対照表

`01-overview.md` セクション5で定義された正規の用語マッピング：

| 日本語 | English | 略称 |
|--------|---------|------|
| 工程設計 | Process Design / Process Planning | — |
| 先行製品品質計画 | Advanced Product Quality Planning | APQP |
| 工程フローチャート | Process Flow Chart | — |
| 工程FMEA | Process FMEA | PFMEA |
| コントロールプラン | Control Plan | CP |
| QC工程表 | QC Process Chart | — |
| 作業指示書 / 工程指示書 | Process Instructions | — |
| 作業標準書 | Standard Operating Procedure | SOP |
| 作業手順書 | Work Instruction | WI |
| 特性マトリクス | Characteristics Matrix | — |
| 設備仕様書 | Equipment Specification (URS) | — |
| 治工具 | Jig & Fixture | — |
| フロアプランレイアウト | Floor Plan Layout | — |
| 梱包仕様書 | Packaging Specifications | — |
| 測定システム解析 | Measurement System Analysis | MSA |
| 工程能力指数 | Process Capability Index | Cp / Cpk |
| 生産部品承認プロセス | Production Part Approval Process | PPAP |
| 特殊特性 | Special Characteristic | CC / SC |
| ポカヨケ | Poka-Yoke (Mistake-Proofing) | — |
| デザインレビュー | Design Review | DR |
| タクトタイム | Takt Time | — |

用語に迷った場合は本表と `01-overview.md` を参照してください。
